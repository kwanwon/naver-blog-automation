# 🛡️ 시리얼관리 프로그램 복원 가이드

## 📅 수정 날짜: 2025년 8월 30일

### 🔄 **수정 내용**
- 데이터베이스 동기화 문제 해결
- 블로그 사용횟수가 1회로 잘못 표시되는 문제 수정
- 자동 동기화 기능 추가
- 수동 동기화 버튼 추가

---

## 🚨 **문제 발생 시 복원 방법**

### **방법 1: 백업 파일로 복원 (권장)**

#### 1단계: 백업 파일 확인
```bash
ls -la *backup*
```

다음 백업 파일들이 있어야 합니다:
- `serial_validator_backup_20250830_104021.py` (프로그램 백업)
- `blogs_backup_20250830_104021.db` (블로그 DB 백업)
- `serials_backup_20250830_104021.db` (메인 DB 백업)

#### 2단계: 원본 파일로 복원
```bash
# 프로그램 파일 복원
cp serial_validator_backup_20250830_104021.py serial_validator.py

# 데이터베이스 파일 복원 (필요한 경우만)
cp blogs_backup_20250830_104021.db blogs.db
cp serials_backup_20250830_104021.db serials.db
```

#### 3단계: 프로그램 재시작
```bash
python3 serial_validator.py
```

---

### **방법 2: 기존 백업 파일 사용**

만약 위 백업이 없다면 기존 백업 파일을 사용:

```bash
# 기존 백업 파일로 복원
cp serial_validator.py.backup serial_validator.py
```

---

## 🔧 **수정된 기능들**

### **1. 자동 동기화**
- 프로그램 시작 시 자동으로 데이터베이스 동기화
- 새로고침 버튼 클릭 시 자동 동기화

### **2. 수동 동기화 버튼**
- "DB 동기화" 버튼 추가
- 클릭하면 즉시 데이터베이스 동기화 실행

### **3. 오류 처리 개선**
- 동기화 실패 시에도 프로그램이 정상 작동
- 상세한 오류 로그 기록

---

## 📋 **수정 전후 비교**

### **수정 전 문제점:**
- 블로그 사용횟수가 항상 1회로 표시
- `serials.db`와 `blogs.db` 간 동기화 안됨
- 실제 사용횟수와 화면 표시 불일치

### **수정 후 개선점:**
- ✅ 정확한 사용횟수 표시
- ✅ 자동 데이터베이스 동기화
- ✅ 수동 동기화 버튼 제공
- ✅ 안전한 오류 처리

---

## 🆘 **긴급 복원 명령어**

문제 발생 시 즉시 실행할 수 있는 명령어:

```bash
# 터미널에서 시리얼관리 폴더로 이동
cd "/Users/gm2hapkido/Desktop/-/시리얼관리"

# 백업으로 즉시 복원
cp serial_validator_backup_20250830_104021.py serial_validator.py

# 프로그램 재시작
python3 serial_validator.py
```

---

## 📞 **추가 도움이 필요한 경우**

1. **로그 파일 확인**: `serial_manager.log` 파일에서 오류 내용 확인
2. **백업 폴더 확인**: `backup_archives/` 폴더에 추가 백업 파일들 있음
3. **데이터베이스 복원**: 필요시 `backups/` 폴더의 DB 백업 파일 사용

---

## ⚠️ **주의사항**

- 복원 전에 현재 상태도 백업해두는 것을 권장
- 데이터베이스 파일 복원 시 최신 데이터가 손실될 수 있음
- 복원 후 반드시 프로그램 재시작 필요

---

**📝 작성자**: AI Assistant  
**📅 작성일**: 2025년 8월 30일  
**🔄 버전**: 1.0
